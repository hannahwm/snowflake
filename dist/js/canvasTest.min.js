/*! project-name v0.0.1 | (c) 2020 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
var $=jQuery;!(function(t){var e=e||{};t.fn.canvasTest=function(t){return this.each((function(){Object.create(e.canvasTest).init(this,t)}))},t.fn.canvasTest.options={canvasId:"canvas",saveBtn:"#save"},e.canvasTest={init:function(e,n){this.$container=t(e),this.options=t.extend({},t.fn.canvasTest.options,n),this.bindElements(),this.bindEvents()},bindElements:function(){this.$saveBtn=this.$container.find(this.options.saveBtn),drawing=!1,startX=0,startY=0,imageData=null},bindEvents:function(){const e=document.getElementById(this.options.canvasId);e.addEventListener("mousedown",this.startPosition),e.addEventListener("mouseup",this.endPosition),e.addEventListener("mousemove",this.draw),t(this.options.saveBtn).on("click",(function(t){Canvas2Image.saveAsImage(e,600,600,"jpeg")}))},startPosition:function(t){const e=this.getContext("2d");startX=t.clientX,startY=t.clientY,imageData=e.getImageData(0,0,this.width,this.height),drawing=!0},endPosition:function(t){const e=document.getElementById("canvas").getContext("2d");e.lineWidth=4,e.lineCap="round",e.moveTo(startX,startY),e.lineTo(t.clientX,t.clientY),e.strokeStyle="#ffffff",e.stroke(),e.beginPath(),drawing=!1},draw:function(t){const e=document.getElementById("canvas").getContext("2d");if(!drawing)return;const n={x:300,y:300},o=6;startX,startY,Math.PI;function i(t,e,n,o={}){const i=t.x-e.x,s=t.y-e.y,a=Math.cos(n),r=Math.sin(n);return o.x=i*a-s*r+e.x,o.y=i*r+s*a+e.y,o}function s(t,e,o=[]){const s=2*Math.PI/e;o.push(t);for(let a=1;a<e;a++)o.push(i(t,n,a*s));return o}function a(t,e,n,o,i={}){return i.x=(t.x-o.x)*(e?-1:1)+o.x,i.y=(t.y-o.y)*(n?-1:1)+o.y,i}function r(t,e,i=[]){for(let e=0;e<o;e++)i.push(a({x:t[e].x,y:t[e].y},!0,!1,n));return i}const c=s({x:startX,y:startY},o),y=s({x:t.clientX,y:t.clientY},o),v=r(c),x=r(y);e.putImageData(imageData,0,0),e.lineWidth=4,e.lineCap="round",e.moveTo(startX,startY),e.lineTo(t.clientX,t.clientY),e.strokeStyle="#ffffff",e.stroke(),e.beginPath(),e.moveTo(t.clientX,t.clientY),e.moveTo(c[1].x,c[1].y),e.lineTo(y[1].x,y[1].y),e.stroke(),e.beginPath(),e.moveTo(y[1].x,y[1].y),e.moveTo(c[2].x,c[2].y),e.lineTo(y[2].x,y[2].y),e.stroke(),e.beginPath(),e.moveTo(y[2].x,y[2].y),e.moveTo(c[3].x,c[3].y),e.lineTo(y[3].x,y[3].y),e.stroke(),e.beginPath(),e.moveTo(y[3].x,y[3].y),e.moveTo(c[4].x,c[4].y),e.lineTo(y[4].x,y[4].y),e.stroke(),e.beginPath(),e.moveTo(y[4].x,y[4].y),e.moveTo(c[5].x,c[5].y),e.lineTo(y[5].x,y[5].y),e.stroke(),e.beginPath(),e.moveTo(y[5].x,y[5].y),e.moveTo(v[0].x,v[0].y),e.lineTo(x[0].x,x[0].y),e.stroke(),e.beginPath(),e.moveTo(x[0].x,x[0].y),e.moveTo(v[1].x,v[1].y),e.lineTo(x[1].x,x[1].y),e.stroke(),e.beginPath(),e.moveTo(x[1].x,x[1].y),e.moveTo(v[2].x,v[2].y),e.lineTo(x[2].x,x[2].y),e.stroke(),e.beginPath(),e.moveTo(x[2].x,x[2].y),e.moveTo(v[3].x,v[3].y),e.lineTo(x[3].x,x[3].y),e.stroke(),e.beginPath(),e.moveTo(x[3].x,x[3].y),e.moveTo(v[4].x,v[4].y),e.lineTo(x[4].x,x[4].y),e.stroke(),e.beginPath(),e.moveTo(x[4].x,x[4].y),e.moveTo(v[5].x,v[5].y),e.lineTo(x[5].x,x[5].y),e.stroke(),e.beginPath(),e.moveTo(x[5].x,x[5].y)}}})($),$(document).ready((function(){$(".canvas-wrapper").canvasTest()}));